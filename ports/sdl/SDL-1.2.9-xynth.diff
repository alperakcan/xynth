diff -U 3 -H -d -r -N SDL-1.2.9/Makefile.in SDL-1.2.9-xynth/Makefile.in
--- SDL-1.2.9/Makefile.in	2005-08-28 09:32:09.000000000 +0300
+++ SDL-1.2.9-xynth/Makefile.in	2005-12-02 14:14:03.000000000 +0200
@@ -351,43 +351,7 @@
 .SUFFIXES:
 am--refresh:
 	@:
-$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
-	@for dep in $?; do \
-	  case '$(am__configure_deps)' in \
-	    *$$dep*) \
-	      echo ' cd $(srcdir) && $(AUTOMAKE) --foreign '; \
-	      cd $(srcdir) && $(AUTOMAKE) --foreign  \
-		&& exit 0; \
-	      exit 1;; \
-	  esac; \
-	done; \
-	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign  Makefile'; \
-	cd $(top_srcdir) && \
-	  $(AUTOMAKE) --foreign  Makefile
-.PRECIOUS: Makefile
-Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
-	@case '$?' in \
-	  *config.status*) \
-	    echo ' $(SHELL) ./config.status'; \
-	    $(SHELL) ./config.status;; \
-	  *) \
-	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe)'; \
-	    cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe);; \
-	esac;
 
-$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
-	$(SHELL) ./config.status --recheck
-
-$(top_srcdir)/configure:  $(am__configure_deps)
-	cd $(srcdir) && $(AUTOCONF)
-$(ACLOCAL_M4):  $(am__aclocal_m4_deps)
-	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
-sdl-config: $(top_builddir)/config.status $(srcdir)/sdl-config.in
-	cd $(top_builddir) && $(SHELL) ./config.status $@
-SDL.spec: $(top_builddir)/config.status $(srcdir)/SDL.spec.in
-	cd $(top_builddir) && $(SHELL) ./config.status $@
-SDL.qpg: $(top_builddir)/config.status $(srcdir)/SDL.qpg.in
-	cd $(top_builddir) && $(SHELL) ./config.status $@
 install-binSCRIPTS: $(bin_SCRIPTS)
 	@$(NORMAL_INSTALL)
 	test -z "$(bindir)" || $(mkdir_p) "$(DESTDIR)$(bindir)"
diff -U 3 -H -d -r -N SDL-1.2.9/README.Xynth SDL-1.2.9-xynth/README.Xynth
--- SDL-1.2.9/README.Xynth	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/README.Xynth	2005-12-02 14:14:03.000000000 +0200
@@ -0,0 +1,8 @@
+www.xynth.org
+
+Alper Akcan <distchx@yahoo.com>
+
+./configure
+make
+make install
+export SDL_VIDEODRIVER=xynth
diff -U 3 -H -d -r -N SDL-1.2.9/configure SDL-1.2.9-xynth/configure
--- SDL-1.2.9/configure	2005-08-28 09:32:11.000000000 +0300
+++ SDL-1.2.9-xynth/configure	2005-12-02 14:12:47.000000000 +0200
@@ -1080,6 +1080,7 @@
   --enable-video-ps2gs    use PlayStation 2 GS video driver default=yes
   --enable-video-ggi      use GGI video driver default=no
   --enable-video-svga     use SVGAlib video driver default=no
+  --enable-video-xynth    use The Xynth Windowing System default=yes
   --enable-video-vgl      use VGL video driver default=no
   --enable-video-aalib    use AAlib video driver default=no
   --enable-video-xbios    use Atari Xbios video driver default=yes
@@ -3793,7 +3794,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 3796 "configure"' > conftest.$ac_ext
+  echo '#line 3797 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -5607,7 +5608,7 @@
 
 
 # Provide some information about the compiler.
-echo "$as_me:5610:" \
+echo "$as_me:5611:" \
      "checking for Fortran 77 compiler version" >&5
 ac_compiler=`set X $ac_compile; echo $2`
 { (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
@@ -6661,11 +6662,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6664: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6665: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:6668: \$? = $ac_status" >&5
+   echo "$as_me:6669: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
@@ -6904,11 +6905,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6907: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6908: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:6911: \$? = $ac_status" >&5
+   echo "$as_me:6912: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
@@ -6964,11 +6965,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6967: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6968: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:6971: \$? = $ac_status" >&5
+   echo "$as_me:6972: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -9159,7 +9160,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 9162 "configure"
+#line 9163 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -9257,7 +9258,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 9260 "configure"
+#line 9261 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -11458,11 +11459,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:11461: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:11462: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:11465: \$? = $ac_status" >&5
+   echo "$as_me:11466: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
@@ -11518,11 +11519,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:11521: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:11522: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:11525: \$? = $ac_status" >&5
+   echo "$as_me:11526: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -12881,7 +12882,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 12884 "configure"
+#line 12885 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -12979,7 +12980,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 12982 "configure"
+#line 12983 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -13816,11 +13817,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13819: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13820: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:13823: \$? = $ac_status" >&5
+   echo "$as_me:13824: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
@@ -13876,11 +13877,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13879: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13880: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:13883: \$? = $ac_status" >&5
+   echo "$as_me:13884: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -15925,11 +15926,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15928: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15929: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:15932: \$? = $ac_status" >&5
+   echo "$as_me:15933: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
@@ -16168,11 +16169,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16171: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16172: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:16175: \$? = $ac_status" >&5
+   echo "$as_me:16176: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
@@ -16228,11 +16229,11 @@
    -e 's:.*FLAGS}? :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16231: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16232: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:16235: \$? = $ac_status" >&5
+   echo "$as_me:16236: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -18423,7 +18424,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 18426 "configure"
+#line 18427 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -18521,7 +18522,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 18524 "configure"
+#line 18525 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -25595,6 +25596,80 @@
     fi
 }
 
+CheckXynth()
+{
+    # Check whether --enable-video-xynth or --disable-video-xynth was given.
+if test "${enable_video_xynth+set}" = set; then
+  enableval="$enable_video_xynth"
+
+else
+  enable_video_xynth=yes
+fi;
+    if test x$enable_video = xyes -a x$enable_video_xynth = xyes; then
+        echo "$as_me:$LINENO: checking for Xynth support" >&5
+echo $ECHO_N "checking for Xynth support... $ECHO_C" >&6
+        video_xynth=yes
+        cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+         #include <xynth.h>
+
+int
+main ()
+{
+
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
+        video_xynth=yes
+
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+        echo "$as_me:$LINENO: result: $video_xynth" >&5
+echo "${ECHO_T}$video_xynth" >&6
+        if test x$video_xynth = xyes; then
+            CFLAGS="$CFLAGS -DENABLE_XYNTH"
+            SYSTEM_LIBS="$SYSTEM_LIBS -lxynth"
+
+            VIDEO_SUBDIRS="$VIDEO_SUBDIRS xynth"
+            VIDEO_DRIVERS="$VIDEO_DRIVERS xynth/libvideo_xynth.la"
+        fi
+    fi
+}
+
 CheckVGL()
 {
     # Check whether --enable-video-vgl or --disable-video-vgl was given.
@@ -29805,6 +29880,7 @@
         CheckPS2GS
         CheckGGI
         CheckSVGA
+	CheckXynth
         CheckAAlib
         CheckQtopia
         CheckPicoGUI
@@ -29902,6 +29978,7 @@
         CheckX11
         CheckDGA
         CheckSVGA
+	CheckXynth
         CheckAAlib
         CheckOpenGL
         CheckPTHREAD
@@ -29962,6 +30039,7 @@
         CheckX11
         CheckDGA
         CheckSVGA
+	CheckXynth
         CheckAAlib
         CheckOpenGL
         CheckPTHREAD
@@ -31773,7 +31851,7 @@
 esac
 
 # Finally create all the generated files
-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ac_config_files="$ac_config_files Makefile docs/Makefile docs/html/Makefile docs/man3/Makefile include/Makefile src/Makefile src/main/Makefile src/main/macosx/Makefile src/main/macosx/Info.plist src/audio/Makefile src/audio/alsa/Makefile src/audio/arts/Makefile src/audio/baudio/Makefile src/audio/dc/Makefile src/audio/disk/Makefile src/audio/dma/Makefile src/audio/dmedia/Makefile src/audio/dsp/Makefile src/audio/esd/Makefile src/audio/macosx/Makefile src/audio/macrom/Makefile src/audio/mint/Makefile src/audio/mme/Makefile src/audio/nas/Makefile src/audio/nto/Makefile src/audio/openbsd/Makefile src/audio/paudio/Makefile src/audio/sun/Makefile src/audio/ums/Makefile src/audio/windib/Makefile src/audio/windx5/Makefile src/video/Makefile src/video/aalib/Makefile src/video/ataricommon/Makefile src/video/bwindow/Makefile src/video/cybergfx/Makefile src/video/dc/Makefile src/video/dga/Makefile src/video/directfb/Makefile src/video/dummy/Makefile src/video/epoc/Makefile src/video/fbcon/Makefile src/video/gem/Makefile src/video/ggi/Makefile src/video/maccommon/Makefile src/video/macdsp/Makefile src/video/macrom/Makefile src/video/nanox/Makefile src/video/photon/Makefile src/video/picogui/Makefile src/video/ps2gs/Makefile src/video/qtopia/Makefile src/video/quartz/Makefile src/video/riscos/Makefile src/video/svga/Makefile src/video/vgl/Makefile src/video/wincommon/Makefile src/video/windib/Makefile src/video/windx5/Makefile src/video/x11/Makefile src/video/xbios/Makefile src/video/XFree86/Makefile src/video/XFree86/extensions/Makefile src/video/XFree86/Xinerama/Makefile src/video/XFree86/Xv/Makefile src/video/XFree86/Xxf86dga/Makefile src/video/XFree86/Xxf86vm/Makefile src/events/Makefile src/joystick/Makefile src/joystick/amigaos/Makefile src/joystick/beos/Makefile src/joystick/bsd/Makefile src/joystick/darwin/Makefile src/joystick/dc/Makefile src/joystick/dummy/Makefile src/joystick/linux/Makefile src/joystick/macos/Makefile src/joystick/mint/Makefile src/joystick/riscos/Makefile src/joystick/win32/Makefile src/cdrom/Makefile src/cdrom/aix/Makefile src/cdrom/beos/Makefile src/cdrom/dc/Makefile src/cdrom/dummy/Makefile src/cdrom/bsdi/Makefile src/cdrom/freebsd/Makefile src/cdrom/linux/Makefile src/cdrom/macos/Makefile src/cdrom/macosx/Makefile src/cdrom/mint/Makefile src/cdrom/openbsd/Makefile src/cdrom/osf/Makefile src/cdrom/qnx/Makefile src/cdrom/win32/Makefile src/thread/Makefile src/timer/Makefile src/endian/Makefile src/file/Makefile src/cpuinfo/Makefile src/hermes/Makefile sdl-config SDL.spec SDL.qpg"
+                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ac_config_files="$ac_config_files Makefile docs/Makefile docs/html/Makefile docs/man3/Makefile include/Makefile src/Makefile src/main/Makefile src/main/macosx/Makefile src/main/macosx/Info.plist src/audio/Makefile src/audio/alsa/Makefile src/audio/arts/Makefile src/audio/baudio/Makefile src/audio/dc/Makefile src/audio/disk/Makefile src/audio/dma/Makefile src/audio/dmedia/Makefile src/audio/dsp/Makefile src/audio/esd/Makefile src/audio/macosx/Makefile src/audio/macrom/Makefile src/audio/mint/Makefile src/audio/mme/Makefile src/audio/nas/Makefile src/audio/nto/Makefile src/audio/openbsd/Makefile src/audio/paudio/Makefile src/audio/sun/Makefile src/audio/ums/Makefile src/audio/windib/Makefile src/audio/windx5/Makefile src/video/Makefile src/video/aalib/Makefile src/video/ataricommon/Makefile src/video/bwindow/Makefile src/video/cybergfx/Makefile src/video/dc/Makefile src/video/dga/Makefile src/video/directfb/Makefile src/video/dummy/Makefile src/video/epoc/Makefile src/video/fbcon/Makefile src/video/gem/Makefile src/video/ggi/Makefile src/video/maccommon/Makefile src/video/macdsp/Makefile src/video/macrom/Makefile src/video/nanox/Makefile src/video/photon/Makefile src/video/picogui/Makefile src/video/ps2gs/Makefile src/video/qtopia/Makefile src/video/quartz/Makefile src/video/riscos/Makefile src/video/svga/Makefile src/video/xynth/Makefile src/video/vgl/Makefile src/video/wincommon/Makefile src/video/windib/Makefile src/video/windx5/Makefile src/video/x11/Makefile src/video/xbios/Makefile src/video/XFree86/Makefile src/video/XFree86/extensions/Makefile src/video/XFree86/Xinerama/Makefile src/video/XFree86/Xv/Makefile src/video/XFree86/Xxf86dga/Makefile src/video/XFree86/Xxf86vm/Makefile src/events/Makefile src/joystick/Makefile src/joystick/amigaos/Makefile src/joystick/beos/Makefile src/joystick/bsd/Makefile src/joystick/darwin/Makefile src/joystick/dc/Makefile src/joystick/dummy/Makefile src/joystick/linux/Makefile src/joystick/macos/Makefile src/joystick/mint/Makefile src/joystick/riscos/Makefile src/joystick/win32/Makefile src/cdrom/Makefile src/cdrom/aix/Makefile src/cdrom/beos/Makefile src/cdrom/dc/Makefile src/cdrom/dummy/Makefile src/cdrom/bsdi/Makefile src/cdrom/freebsd/Makefile src/cdrom/linux/Makefile src/cdrom/macos/Makefile src/cdrom/macosx/Makefile src/cdrom/mint/Makefile src/cdrom/openbsd/Makefile src/cdrom/osf/Makefile src/cdrom/qnx/Makefile src/cdrom/win32/Makefile src/thread/Makefile src/timer/Makefile src/endian/Makefile src/file/Makefile src/cpuinfo/Makefile src/hermes/Makefile sdl-config SDL.spec SDL.qpg"
           ac_config_commands="$ac_config_commands default"
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -32573,6 +32651,7 @@
   "src/video/quartz/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/quartz/Makefile" ;;
   "src/video/riscos/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/riscos/Makefile" ;;
   "src/video/svga/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/svga/Makefile" ;;
+  "src/video/xynth/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/xynth/Makefile" ;;
   "src/video/vgl/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/vgl/Makefile" ;;
   "src/video/wincommon/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/wincommon/Makefile" ;;
   "src/video/windib/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/video/windib/Makefile" ;;
diff -U 3 -H -d -r -N SDL-1.2.9/configure.in SDL-1.2.9-xynth/configure.in
--- SDL-1.2.9/configure.in	2005-08-28 09:31:18.000000000 +0300
+++ SDL-1.2.9-xynth/configure.in	2005-12-02 14:14:03.000000000 +0200
@@ -947,6 +947,32 @@
     fi
 }
 
+dnl Find the Xynth includes and libraries
+CheckXynth()
+{
+    AC_ARG_ENABLE(video-xynth,
+[  --enable-video-xynth    use The Xynth Windowing System [default=yes]],
+                  , enable_video_xynth=yes)
+    if test x$enable_video = xyes -a x$enable_video_xynth = xyes; then
+        AC_MSG_CHECKING(for Xynth support)
+        video_xynth=yes
+        AC_TRY_COMPILE([
+         #include <xynth.h>
+        ],[
+        ],[
+        video_xynth=yes
+        ])
+        AC_MSG_RESULT($video_xynth)
+        if test x$video_xynth = xyes; then
+            CFLAGS="$CFLAGS -DENABLE_XYNTH"
+            SYSTEM_LIBS="$SYSTEM_LIBS -lxynth"
+
+            VIDEO_SUBDIRS="$VIDEO_SUBDIRS xynth"
+            VIDEO_DRIVERS="$VIDEO_DRIVERS xynth/libvideo_xynth.la"
+        fi
+    fi
+}
+
 dnl Find the VGL includes and libraries
 CheckVGL()
 {
@@ -1898,6 +1924,7 @@
         CheckPS2GS
         CheckGGI
         CheckSVGA
+	CheckXynth
         CheckAAlib
         CheckQtopia
         CheckPicoGUI
@@ -1981,6 +2008,7 @@
         CheckX11
         CheckDGA
         CheckSVGA
+	CheckXynth
         CheckAAlib
         CheckOpenGL
         CheckPTHREAD
@@ -2027,6 +2055,7 @@
         CheckX11
         CheckDGA
         CheckSVGA
+	CheckXynth
         CheckAAlib
         CheckOpenGL
         CheckPTHREAD
@@ -2922,6 +2951,7 @@
 src/video/quartz/Makefile
 src/video/riscos/Makefile
 src/video/svga/Makefile
+src/video/xynth/Makefile
 src/video/vgl/Makefile
 src/video/wincommon/Makefile
 src/video/windib/Makefile
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/Makefile.am SDL-1.2.9-xynth/src/video/Makefile.am
--- SDL-1.2.9/src/video/Makefile.am	2003-08-22 08:51:19.000000000 +0300
+++ SDL-1.2.9-xynth/src/video/Makefile.am	2005-12-02 14:14:03.000000000 +0200
@@ -5,7 +5,7 @@
 
 # Define which subdirectories need to be built
 SUBDIRS = @VIDEO_SUBDIRS@
-DIST_SUBDIRS = dummy x11 dga nanox fbcon directfb vgl svga ggi aalib \
+DIST_SUBDIRS = dummy x11 dga nanox fbcon directfb vgl svga xynth ggi aalib \
                wincommon windib windx5 \
                maccommon macdsp macrom riscos quartz \
                bwindow ps2gs photon cybergfx epoc picogui \
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/Makefile.in SDL-1.2.9-xynth/src/video/Makefile.in
--- SDL-1.2.9/src/video/Makefile.in	2005-08-28 09:31:56.000000000 +0300
+++ SDL-1.2.9-xynth/src/video/Makefile.in	2005-12-02 14:12:34.000000000 +0200
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.9.6 from Makefile.am.
+# Makefile.in generated by automake 1.9.5 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -14,6 +14,8 @@
 
 @SET_MAKE@
 
+SOURCES = $(libvideo_la_SOURCES)
+
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
 VPATH = @srcdir@
@@ -284,7 +286,7 @@
 
 # Define which subdirectories need to be built
 SUBDIRS = @VIDEO_SUBDIRS@
-DIST_SUBDIRS = dummy x11 dga nanox fbcon directfb vgl svga ggi aalib \
+DIST_SUBDIRS = dummy x11 dga nanox fbcon directfb vgl svga xynth ggi aalib \
                wincommon windib windx5 \
                maccommon macdsp macrom riscos quartz \
                bwindow ps2gs photon cybergfx epoc picogui \
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/SDL_sysvideo.h SDL-1.2.9-xynth/src/video/SDL_sysvideo.h
--- SDL-1.2.9/src/video/SDL_sysvideo.h	2005-04-17 13:40:41.000000000 +0300
+++ SDL-1.2.9-xynth/src/video/SDL_sysvideo.h	2005-12-02 14:14:03.000000000 +0200
@@ -359,6 +359,9 @@
 #ifdef ENABLE_SVGALIB
 extern VideoBootStrap SVGALIB_bootstrap;
 #endif
+#ifdef ENABLE_XYNTH
+extern VideoBootStrap XYNTH_bootstrap;
+#endif
 #ifdef ENABLE_AALIB
 extern VideoBootStrap AALIB_bootstrap;
 #endif
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/SDL_video.c SDL-1.2.9-xynth/src/video/SDL_video.c
--- SDL-1.2.9/src/video/SDL_video.c	2005-06-12 19:12:55.000000000 +0300
+++ SDL-1.2.9-xynth/src/video/SDL_video.c	2005-12-02 14:14:03.000000000 +0200
@@ -75,6 +75,9 @@
 #ifdef ENABLE_SVGALIB
 	&SVGALIB_bootstrap,
 #endif
+#ifdef ENABLE_XYNTH
+	&XYNTH_bootstrap,
+#endif
 #ifdef ENABLE_AALIB
 	&AALIB_bootstrap,
 #endif
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/Makefile.am SDL-1.2.9-xynth/src/video/xynth/Makefile.am
--- SDL-1.2.9/src/video/xynth/Makefile.am	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/Makefile.am	2005-02-21 19:03:20.000000000 +0200
@@ -0,0 +1,17 @@
+
+## Makefile.am for SDL using the xynth video driver
+
+noinst_LTLIBRARIES = libvideo_xynth.la
+libvideo_xynth_la_SOURCES = $(XYNTH_SRCS)
+
+# The SDL xynth video driver sources
+XYNTH_SRCS =                    \
+	SDL_xynthcursor.c	\
+	SDL_xynthevent.c	\
+	SDL_xynthgamma.c	\
+	SDL_xynthgl.c		\
+	SDL_xynthhw.c		\
+	SDL_xynthvideo.c	\
+	SDL_xynthwm.c		\
+	SDL_xynth.h
+
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/Makefile.in SDL-1.2.9-xynth/src/video/xynth/Makefile.in
--- SDL-1.2.9/src/video/xynth/Makefile.in	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/Makefile.in	2004-11-19 17:25:21.000000000 +0200
@@ -0,0 +1,558 @@
+# Makefile.in generated by automake 1.8.5 from Makefile.am.
+# @configure_input@
+
+# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
+# 2003, 2004  Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+@SET_MAKE@
+
+SOURCES = $(libvideo_xynth_la_SOURCES)
+
+srcdir = @srcdir@
+top_srcdir = @top_srcdir@
+VPATH = @srcdir@
+pkgdatadir = $(datadir)/@PACKAGE@
+pkglibdir = $(libdir)/@PACKAGE@
+pkgincludedir = $(includedir)/@PACKAGE@
+top_builddir = ../../..
+am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
+INSTALL = @INSTALL@
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
+INSTALL_HEADER = $(INSTALL_DATA)
+transform = $(program_transform_name)
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+build_triplet = @build@
+host_triplet = @host@
+target_triplet = @target@
+subdir = src/video/xynth
+DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
+am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \
+	$(top_srcdir)/configure.in
+am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
+	$(ACLOCAL_M4)
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_CLEAN_FILES =
+LTLIBRARIES = $(noinst_LTLIBRARIES)
+libvideo_xynth_la_LIBADD =
+am__objects_1 = SDL_xynthcursor.lo SDL_xynthevent.lo SDL_xynthgamma.lo \
+	SDL_xynthgl.lo SDL_xynthhw.lo SDL_xynthvideo.lo SDL_xynthwm.lo
+am_libvideo_xynth_la_OBJECTS = $(am__objects_1)
+libvideo_xynth_la_OBJECTS = $(am_libvideo_xynth_la_OBJECTS)
+DEFAULT_INCLUDES = -I. -I$(srcdir)
+depcomp = $(SHELL) $(top_srcdir)/depcomp
+am__depfiles_maybe = depfiles
+@AMDEP_TRUE@DEP_FILES = ./$(DEPDIR)/SDL_xynthcursor.Plo \
+@AMDEP_TRUE@	./$(DEPDIR)/SDL_xynthevent.Plo \
+@AMDEP_TRUE@	./$(DEPDIR)/SDL_xynthgamma.Plo \
+@AMDEP_TRUE@	./$(DEPDIR)/SDL_xynthgl.Plo \
+@AMDEP_TRUE@	./$(DEPDIR)/SDL_xynthhw.Plo \
+@AMDEP_TRUE@	./$(DEPDIR)/SDL_xynthvideo.Plo \
+@AMDEP_TRUE@	./$(DEPDIR)/SDL_xynthwm.Plo
+COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
+	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) \
+	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
+	$(AM_CFLAGS) $(CFLAGS)
+CCLD = $(CC)
+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(AM_LDFLAGS) $(LDFLAGS) -o $@
+SOURCES = $(libvideo_xynth_la_SOURCES)
+DIST_SOURCES = $(libvideo_xynth_la_SOURCES)
+ETAGS = etags
+CTAGS = ctags
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
+ACLOCAL = @ACLOCAL@
+ALLOCA = @ALLOCA@
+AMDEP_FALSE = @AMDEP_FALSE@
+AMDEP_TRUE = @AMDEP_TRUE@
+AMTAR = @AMTAR@
+AR = @AR@
+ARCH = @ARCH@
+ARTSCCONFIG = @ARTSCCONFIG@
+AS = @AS@
+ASFLAGS = @ASFLAGS@
+AUDIO_DRIVERS = @AUDIO_DRIVERS@
+AUDIO_SUBDIRS = @AUDIO_SUBDIRS@
+AUTOCONF = @AUTOCONF@
+AUTOHEADER = @AUTOHEADER@
+AUTOMAKE = @AUTOMAKE@
+AWK = @AWK@
+CC = @CC@
+CCAS = @CCAS@
+CCASFLAGS = @CCASFLAGS@
+CCDEPMODE = @CCDEPMODE@
+CDROM_DRIVERS = @CDROM_DRIVERS@
+CDROM_SUBDIRS = @CDROM_SUBDIRS@
+CFLAGS = @CFLAGS@
+CPP = @CPP@
+CPPFLAGS = @CPPFLAGS@
+CXX = @CXX@
+CXXCPP = @CXXCPP@
+CXXDEPMODE = @CXXDEPMODE@
+CXXFLAGS = @CXXFLAGS@
+CYGPATH_W = @CYGPATH_W@
+DEFS = @DEFS@
+DEPDIR = @DEPDIR@
+DIRECTFB_CFLAGS = @DIRECTFB_CFLAGS@
+DIRECTFB_LIBS = @DIRECTFB_LIBS@
+DLLTOOL = @DLLTOOL@
+ECHO = @ECHO@
+ECHO_C = @ECHO_C@
+ECHO_N = @ECHO_N@
+ECHO_T = @ECHO_T@
+EGREP = @EGREP@
+ENABLE_SHARED_FALSE = @ENABLE_SHARED_FALSE@
+ENABLE_SHARED_TRUE = @ENABLE_SHARED_TRUE@
+ENABLE_STATIC_FALSE = @ENABLE_STATIC_FALSE@
+ENABLE_STATIC_TRUE = @ENABLE_STATIC_TRUE@
+ESD_CFLAGS = @ESD_CFLAGS@
+ESD_CONFIG = @ESD_CONFIG@
+ESD_LIBS = @ESD_LIBS@
+EXEEXT = @EXEEXT@
+F77 = @F77@
+FFLAGS = @FFLAGS@
+HAVE_NASM_FALSE = @HAVE_NASM_FALSE@
+HAVE_NASM_TRUE = @HAVE_NASM_TRUE@
+INSTALL_DATA = @INSTALL_DATA@
+INSTALL_PROGRAM = @INSTALL_PROGRAM@
+INSTALL_SCRIPT = @INSTALL_SCRIPT@
+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
+JOYSTICK_DRIVERS = @JOYSTICK_DRIVERS@
+JOYSTICK_SUBDIRS = @JOYSTICK_SUBDIRS@
+LDFLAGS = @LDFLAGS@
+LIBOBJS = @LIBOBJS@
+LIBS = @LIBS@
+LIBTOOL = @LIBTOOL@
+LN_S = @LN_S@
+LTLIBOBJS = @LTLIBOBJS@
+LT_AGE = @LT_AGE@
+LT_CURRENT = @LT_CURRENT@
+LT_RELEASE = @LT_RELEASE@
+LT_REVISION = @LT_REVISION@
+MAKEINFO = @MAKEINFO@
+NASM = @NASM@
+NASMFLAGS = @NASMFLAGS@
+OBJC = @OBJC@
+OBJCDEPMODE = @OBJCDEPMODE@
+OBJCFLAGS = @OBJCFLAGS@
+OBJDUMP = @OBJDUMP@
+OBJEXT = @OBJEXT@
+PACKAGE = @PACKAGE@
+PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
+PACKAGE_NAME = @PACKAGE_NAME@
+PACKAGE_STRING = @PACKAGE_STRING@
+PACKAGE_TARNAME = @PACKAGE_TARNAME@
+PACKAGE_VERSION = @PACKAGE_VERSION@
+PATH_SEPARATOR = @PATH_SEPARATOR@
+PKG_CONFIG = @PKG_CONFIG@
+PTH_CONFIG = @PTH_CONFIG@
+RANLIB = @RANLIB@
+SDL_BINARY_AGE = @SDL_BINARY_AGE@
+SDL_CFLAGS = @SDL_CFLAGS@
+SDL_EXTRADIRS = @SDL_EXTRADIRS@
+SDL_EXTRALIBS = @SDL_EXTRALIBS@
+SDL_INTERFACE_AGE = @SDL_INTERFACE_AGE@
+SDL_LIBS = @SDL_LIBS@
+SDL_MAJOR_VERSION = @SDL_MAJOR_VERSION@
+SDL_MICRO_VERSION = @SDL_MICRO_VERSION@
+SDL_MINOR_VERSION = @SDL_MINOR_VERSION@
+SDL_RLD_FLAGS = @SDL_RLD_FLAGS@
+SDL_STATIC_LIBS = @SDL_STATIC_LIBS@
+SDL_VERSION = @SDL_VERSION@
+SET_MAKE = @SET_MAKE@
+SHARED_SYSTEM_LIBS = @SHARED_SYSTEM_LIBS@
+SHELL = @SHELL@
+STATIC_SYSTEM_LIBS = @STATIC_SYSTEM_LIBS@
+STRIP = @STRIP@
+SYSTEM_LIBS = @SYSTEM_LIBS@
+TARGET_AIX_FALSE = @TARGET_AIX_FALSE@
+TARGET_AIX_TRUE = @TARGET_AIX_TRUE@
+TARGET_BEOS_FALSE = @TARGET_BEOS_FALSE@
+TARGET_BEOS_TRUE = @TARGET_BEOS_TRUE@
+TARGET_BSDI_FALSE = @TARGET_BSDI_FALSE@
+TARGET_BSDI_TRUE = @TARGET_BSDI_TRUE@
+TARGET_FREEBSD_FALSE = @TARGET_FREEBSD_FALSE@
+TARGET_FREEBSD_TRUE = @TARGET_FREEBSD_TRUE@
+TARGET_IRIX_FALSE = @TARGET_IRIX_FALSE@
+TARGET_IRIX_TRUE = @TARGET_IRIX_TRUE@
+TARGET_LINUX_FALSE = @TARGET_LINUX_FALSE@
+TARGET_LINUX_TRUE = @TARGET_LINUX_TRUE@
+TARGET_MACOSX_FALSE = @TARGET_MACOSX_FALSE@
+TARGET_MACOSX_TRUE = @TARGET_MACOSX_TRUE@
+TARGET_MACOS_FALSE = @TARGET_MACOS_FALSE@
+TARGET_MACOS_TRUE = @TARGET_MACOS_TRUE@
+TARGET_MINT_FALSE = @TARGET_MINT_FALSE@
+TARGET_MINT_TRUE = @TARGET_MINT_TRUE@
+TARGET_NETBSD_FALSE = @TARGET_NETBSD_FALSE@
+TARGET_NETBSD_TRUE = @TARGET_NETBSD_TRUE@
+TARGET_OPENBSD_FALSE = @TARGET_OPENBSD_FALSE@
+TARGET_OPENBSD_TRUE = @TARGET_OPENBSD_TRUE@
+TARGET_QNX_FALSE = @TARGET_QNX_FALSE@
+TARGET_QNX_TRUE = @TARGET_QNX_TRUE@
+TARGET_QTOPIA_FALSE = @TARGET_QTOPIA_FALSE@
+TARGET_QTOPIA_TRUE = @TARGET_QTOPIA_TRUE@
+TARGET_SOLARIS_FALSE = @TARGET_SOLARIS_FALSE@
+TARGET_SOLARIS_TRUE = @TARGET_SOLARIS_TRUE@
+TARGET_WIN32_FALSE = @TARGET_WIN32_FALSE@
+TARGET_WIN32_TRUE = @TARGET_WIN32_TRUE@
+USE_CLONE_FALSE = @USE_CLONE_FALSE@
+USE_CLONE_TRUE = @USE_CLONE_TRUE@
+USE_DIRECTX_FALSE = @USE_DIRECTX_FALSE@
+USE_DIRECTX_TRUE = @USE_DIRECTX_TRUE@
+VERSION = @VERSION@
+VIDEO_DRIVERS = @VIDEO_DRIVERS@
+VIDEO_SUBDIRS = @VIDEO_SUBDIRS@
+X_CFLAGS = @X_CFLAGS@
+X_EXTRA_LIBS = @X_EXTRA_LIBS@
+X_LIBS = @X_LIBS@
+X_PRE_LIBS = @X_PRE_LIBS@
+ac_ct_AR = @ac_ct_AR@
+ac_ct_AS = @ac_ct_AS@
+ac_ct_CC = @ac_ct_CC@
+ac_ct_CXX = @ac_ct_CXX@
+ac_ct_DLLTOOL = @ac_ct_DLLTOOL@
+ac_ct_F77 = @ac_ct_F77@
+ac_ct_OBJDUMP = @ac_ct_OBJDUMP@
+ac_ct_RANLIB = @ac_ct_RANLIB@
+ac_ct_STRIP = @ac_ct_STRIP@
+am__fastdepCC_FALSE = @am__fastdepCC_FALSE@
+am__fastdepCC_TRUE = @am__fastdepCC_TRUE@
+am__fastdepCXX_FALSE = @am__fastdepCXX_FALSE@
+am__fastdepCXX_TRUE = @am__fastdepCXX_TRUE@
+am__fastdepOBJC_FALSE = @am__fastdepOBJC_FALSE@
+am__fastdepOBJC_TRUE = @am__fastdepOBJC_TRUE@
+am__include = @am__include@
+am__leading_dot = @am__leading_dot@
+am__quote = @am__quote@
+arts_lib = @arts_lib@
+bindir = @bindir@
+build = @build@
+build_alias = @build_alias@
+build_cpu = @build_cpu@
+build_os = @build_os@
+build_vendor = @build_vendor@
+datadir = @datadir@
+esd_lib = @esd_lib@
+exec_prefix = @exec_prefix@
+host = @host@
+host_alias = @host_alias@
+host_cpu = @host_cpu@
+host_os = @host_os@
+host_vendor = @host_vendor@
+includedir = @includedir@
+infodir = @infodir@
+install_sh = @install_sh@
+libdir = @libdir@
+libexecdir = @libexecdir@
+localstatedir = @localstatedir@
+mandir = @mandir@
+mkdir_p = @mkdir_p@
+oldincludedir = @oldincludedir@
+prefix = @prefix@
+program_transform_name = @program_transform_name@
+sbindir = @sbindir@
+sharedstatedir = @sharedstatedir@
+sysconfdir = @sysconfdir@
+target = @target@
+target_alias = @target_alias@
+target_cpu = @target_cpu@
+target_os = @target_os@
+target_vendor = @target_vendor@
+noinst_LTLIBRARIES = libvideo_xynth.la
+libvideo_xynth_la_SOURCES = $(XYNTH_SRCS)
+
+# The SDL xynth video driver sources
+XYNTH_SRCS = \
+	SDL_xynthcursor.c	\
+	SDL_xynthcursor.h	\
+	SDL_xynthevent.c	\
+	SDL_xynthevent.h	\
+	SDL_xynthgamma.c	\
+	SDL_xynthgamma.h	\
+	SDL_xynthgl.c		\
+	SDL_xynthgl.h		\
+	SDL_xynthhw.c		\
+	SDL_xynthhw.h		\
+	SDL_xynthvideo.c	\
+	SDL_xynthvideo.h	\
+	SDL_xynthwm.c		\
+	SDL_xynthwm.h
+
+all: all-am
+
+.SUFFIXES:
+.SUFFIXES: .c .lo .o .obj
+$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
+	@for dep in $?; do \
+	  case '$(am__configure_deps)' in \
+	    *$$dep*) \
+	      cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh \
+		&& exit 0; \
+	      exit 1;; \
+	  esac; \
+	done; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign  src/video/xynth/Makefile'; \
+	cd $(top_srcdir) && \
+	  $(AUTOMAKE) --foreign  src/video/xynth/Makefile
+.PRECIOUS: Makefile
+Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
+	@case '$?' in \
+	  *config.status*) \
+	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
+	  *) \
+	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
+	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
+	esac;
+
+$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+$(top_srcdir)/configure:  $(am__configure_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+$(ACLOCAL_M4):  $(am__aclocal_m4_deps)
+	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
+
+clean-noinstLTLIBRARIES:
+	-test -z "$(noinst_LTLIBRARIES)" || rm -f $(noinst_LTLIBRARIES)
+	@list='$(noinst_LTLIBRARIES)'; for p in $$list; do \
+	  dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
+	  test "$$dir" != "$$p" || dir=.; \
+	  echo "rm -f \"$${dir}/so_locations\""; \
+	  rm -f "$${dir}/so_locations"; \
+	done
+libvideo_xynth.la: $(libvideo_xynth_la_OBJECTS) $(libvideo_xynth_la_DEPENDENCIES) 
+	$(LINK)  $(libvideo_xynth_la_LDFLAGS) $(libvideo_xynth_la_OBJECTS) $(libvideo_xynth_la_LIBADD) $(LIBS)
+
+mostlyclean-compile:
+	-rm -f *.$(OBJEXT)
+
+distclean-compile:
+	-rm -f *.tab.c
+
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthcursor.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthevent.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthgamma.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthgl.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthhw.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthvideo.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/SDL_xynthwm.Plo@am__quote@
+
+.c.o:
+@am__fastdepCC_TRUE@	if $(COMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ $<; \
+@am__fastdepCC_TRUE@	then mv -f "$(DEPDIR)/$*.Tpo" "$(DEPDIR)/$*.Po"; else rm -f "$(DEPDIR)/$*.Tpo"; exit 1; fi
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(COMPILE) -c $<
+
+.c.obj:
+@am__fastdepCC_TRUE@	if $(COMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ `$(CYGPATH_W) '$<'`; \
+@am__fastdepCC_TRUE@	then mv -f "$(DEPDIR)/$*.Tpo" "$(DEPDIR)/$*.Po"; else rm -f "$(DEPDIR)/$*.Tpo"; exit 1; fi
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(COMPILE) -c `$(CYGPATH_W) '$<'`
+
+.c.lo:
+@am__fastdepCC_TRUE@	if $(LTCOMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ $<; \
+@am__fastdepCC_TRUE@	then mv -f "$(DEPDIR)/$*.Tpo" "$(DEPDIR)/$*.Plo"; else rm -f "$(DEPDIR)/$*.Tpo"; exit 1; fi
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='$<' object='$@' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	depfile='$(DEPDIR)/$*.Plo' tmpdepfile='$(DEPDIR)/$*.TPlo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LTCOMPILE) -c -o $@ $<
+
+mostlyclean-libtool:
+	-rm -f *.lo
+
+clean-libtool:
+	-rm -rf .libs _libs
+
+distclean-libtool:
+	-rm -f libtool
+uninstall-info-am:
+
+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
+	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	mkid -fID $$unique
+tags: TAGS
+
+TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
+	  test -n "$$unique" || unique=$$empty_fix; \
+	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	    $$tags $$unique; \
+	fi
+ctags: CTAGS
+CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
+	tags=; \
+	here=`pwd`; \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
+	test -z "$(CTAGS_ARGS)$$tags$$unique" \
+	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
+	     $$tags $$unique
+
+GTAGS:
+	here=`$(am__cd) $(top_builddir) && pwd` \
+	  && cd $(top_srcdir) \
+	  && gtags -i $(GTAGS_ARGS) $$here
+
+distclean-tags:
+	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
+
+distdir: $(DISTFILES)
+	@srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`; \
+	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's|.|.|g'`; \
+	list='$(DISTFILES)'; for file in $$list; do \
+	  case $$file in \
+	    $(srcdir)/*) file=`echo "$$file" | sed "s|^$$srcdirstrip/||"`;; \
+	    $(top_srcdir)/*) file=`echo "$$file" | sed "s|^$$topsrcdirstrip/|$(top_builddir)/|"`;; \
+	  esac; \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
+	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
+	    dir="/$$dir"; \
+	    $(mkdir_p) "$(distdir)$$dir"; \
+	  else \
+	    dir=''; \
+	  fi; \
+	  if test -d $$d/$$file; then \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
+	  fi; \
+	done
+check-am: all-am
+check: check-am
+all-am: Makefile $(LTLIBRARIES)
+installdirs:
+install: install-am
+install-exec: install-exec-am
+install-data: install-data-am
+uninstall: uninstall-am
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+
+installcheck: installcheck-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+	  install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-rm -f $(CONFIG_CLEAN_FILES)
+
+maintainer-clean-generic:
+	@echo "This command is intended for maintainers to use"
+	@echo "it deletes files that may require special tools to rebuild."
+clean: clean-am
+
+clean-am: clean-generic clean-libtool clean-noinstLTLIBRARIES \
+	mostlyclean-am
+
+distclean: distclean-am
+	-rm -rf ./$(DEPDIR)
+	-rm -f Makefile
+distclean-am: clean-am distclean-compile distclean-generic \
+	distclean-libtool distclean-tags
+
+dvi: dvi-am
+
+dvi-am:
+
+html: html-am
+
+info: info-am
+
+info-am:
+
+install-data-am:
+
+install-exec-am:
+
+install-info: install-info-am
+
+install-man:
+
+installcheck-am:
+
+maintainer-clean: maintainer-clean-am
+	-rm -rf ./$(DEPDIR)
+	-rm -f Makefile
+maintainer-clean-am: distclean-am maintainer-clean-generic
+
+mostlyclean: mostlyclean-am
+
+mostlyclean-am: mostlyclean-compile mostlyclean-generic \
+	mostlyclean-libtool
+
+pdf: pdf-am
+
+pdf-am:
+
+ps: ps-am
+
+ps-am:
+
+uninstall-am: uninstall-info-am
+
+.PHONY: CTAGS GTAGS all all-am check check-am clean clean-generic \
+	clean-libtool clean-noinstLTLIBRARIES ctags distclean \
+	distclean-compile distclean-generic distclean-libtool \
+	distclean-tags distdir dvi dvi-am html html-am info info-am \
+	install install-am install-data install-data-am install-exec \
+	install-exec-am install-info install-info-am install-man \
+	install-strip installcheck installcheck-am installdirs \
+	maintainer-clean maintainer-clean-generic mostlyclean \
+	mostlyclean-compile mostlyclean-generic mostlyclean-libtool \
+	pdf pdf-am ps ps-am tags uninstall uninstall-am \
+	uninstall-info-am
+
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynth.h SDL-1.2.9-xynth/src/video/xynth/SDL_xynth.h
--- SDL-1.2.9/src/video/xynth/SDL_xynth.h	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynth.h	2005-07-24 03:13:38.000000000 +0300
@@ -0,0 +1,95 @@
+#ifndef SDL_xynth_h
+#define SDL_xynth_h
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <unistd.h>
+#include <xynth.h>
+
+#include "SDL.h"
+#include "SDL_error.h"
+#include "SDL_mouse.h"
+#include "SDL_mutex.h"
+#include "SDL_events_c.h"
+#include "SDL_sysvideo.h"
+#include "SDL_sysevents.h"
+
+#define _THIS	SDL_VideoDevice *this
+
+int sdl_xynth_running;
+int sdl_xynth_running_;
+
+struct WMcursor {
+	int unused;
+};
+
+struct SDL_PrivateVideoData {
+    int w;
+    int h;
+    int bpp;
+    void *buffer;
+    s_thread_t *tid;
+    s_window_t *window;
+};
+
+/* cursor.c */
+void sdl_xynth_FreeWMCursor (_THIS, WMcursor *cursor);
+WMcursor * sdl_xynth_CreateWMCursor (_THIS, Uint8 *data, Uint8 *mask, int w, int h, int hot_x, int hot_y);
+int sdl_xynth_ShowWMCursor (_THIS, WMcursor *cursor);
+void sdl_xynth_WarpWMCursor (_THIS, Uint16 x, Uint16 y);
+void sdl_xynth_MoveWMCursor (_THIS, int x, int y);
+void sdl_xynth_CheckMouseMode (_THIS);
+
+/* event.c */
+void sdl_xynth_atexit (s_window_t *window);
+void sdl_xynth_atevent (s_window_t *window, s_event_t *event);
+void sdl_xynth_InitOSKeymap (_THIS);
+void sdl_xynth_PumpEvents (_THIS);
+SDL_keysym * sdl_xynth_translatekey(s_event_t *event, SDL_keysym *keysym);
+
+/* gamma.c */
+int sdl_xynth_SetGamma (_THIS, float red, float green, float blue);
+int sdl_xynth_GetGamma (_THIS, float *red, float *green, float *blue);
+int sdl_xynth_SetGammaRamp (_THIS, Uint16 *ramp);
+int sdl_xynth_GetGammaRamp (_THIS, Uint16 *ramp);
+
+/* gl.c */
+int sdl_xynth_GL_LoadLibrary (_THIS, const char *path);
+void* sdl_xynth_GL_GetProcAddress (_THIS, const char *proc);
+int sdl_xynth_GL_GetAttribute (_THIS, SDL_GLattr attrib, int* value);
+int sdl_xynth_GL_MakeCurrent (_THIS);
+void sdl_xynth_GL_SwapBuffers (_THIS);
+
+/* hw.c */
+int sdl_xynth_AllocHWSurface (_THIS, SDL_Surface *surface);
+int sdl_xynth_CheckHWBlit (_THIS, SDL_Surface *src, SDL_Surface *dst);
+int sdl_xynth_FillHWRect (_THIS, SDL_Surface *dst, SDL_Rect *rect, Uint32 color);
+int sdl_xynth_SetHWColorKey (_THIS, SDL_Surface *surface, Uint32 key);
+int sdl_xynth_SetHWAlpha (_THIS, SDL_Surface *surface, Uint8 value);
+int sdl_xynth_LockHWSurface (_THIS, SDL_Surface *surface);
+void sdl_xynth_UnlockHWSurface (_THIS, SDL_Surface *surface);
+int sdl_xynth_FlipHWSurface (_THIS, SDL_Surface *surface);
+void sdl_xynth_FreeHWSurface (_THIS, SDL_Surface *surface);
+
+/* video.c */
+int sdl_xynth_Available(void);
+void sdl_xynth_DeleteDevice(SDL_VideoDevice *device);
+SDL_VideoDevice *sdl_xynth_CreateDevice(int devindex);
+int sdl_xynth_VideoInit (_THIS, SDL_PixelFormat *vformat);
+SDL_Rect ** sdl_xynth_ListModes (_THIS, SDL_PixelFormat *format, Uint32 flags);
+SDL_Surface * sdl_xynth_SetVideoMode (_THIS, SDL_Surface *current, int width, int height, int bpp, Uint32 flags);
+int sdl_xynth_ToggleFullScreen (_THIS, int on);
+void sdl_xynth_UpdateMouse (_THIS);
+SDL_Overlay * sdl_xynth_CreateYUVOverlay (_THIS, int width, int height, Uint32 format, SDL_Surface *display);
+int sdl_xynth_SetColors (_THIS, int firstcolor, int ncolors, SDL_Color *colors);
+void sdl_xynth_UpdateRects (_THIS, int numrects, SDL_Rect *rects);
+void sdl_xynth_VideoQuit (_THIS);
+
+/* wm.c */
+void sdl_xynth_SetCaption (_THIS, const char *title, const char *icon);
+void sdl_xynth_SetIcon (_THIS, SDL_Surface *icon, Uint8 *mask);
+int sdl_xynth_IconifyWindow (_THIS);
+SDL_GrabMode sdl_xynth_GrabInput (_THIS, SDL_GrabMode mode);
+int sdl_xynth_GetWMInfo (_THIS, SDL_SysWMinfo *info);
+
+#endif /* SDL_xynth_h */
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthcursor.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthcursor.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthcursor.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthcursor.c	2005-10-04 20:47:04.000000000 +0300
@@ -0,0 +1,57 @@
+#include "SDL_xynth.h"
+
+#if 0
+	#define debugf(a) printf(a);
+#else
+	#define debugf(a)
+#endif
+
+/* Free a window manager cursor
+   This function can be NULL if CreateWMCursor is also NULL.
+ */
+void sdl_xynth_FreeWMCursor (_THIS, WMcursor *cursor)
+{
+	s_free(cursor);
+	debugf("sdl_xynth_FreeWMCursor\n");
+}
+
+/* If not NULL, create a black/white window manager cursor */
+WMcursor * sdl_xynth_CreateWMCursor (_THIS, Uint8 *data, Uint8 *mask, int w, int h, int hot_x, int hot_y)
+{
+	WMcursor *cursor = (WMcursor *) s_malloc(sizeof(WMcursor));
+	debugf("sdl_xynth_CreateWMCursor\n");
+	return cursor;
+}
+
+/* Show the specified cursor, or hide if cursor is NULL */
+int sdl_xynth_ShowWMCursor (_THIS, WMcursor *cursor)
+{
+	debugf("sdl_xynth_ShowWMCursor\n");
+	return 1;
+}
+
+/* Warp the window manager cursor to (x,y)
+   If NULL, a mouse motion event is posted internally.
+ */
+void sdl_xynth_WarpWMCursor (_THIS, Uint16 x, Uint16 y)
+{
+	debugf("sdl_xynth_WarpWMCursor\n");
+}
+
+/* If not NULL, this is called when a mouse motion event occurs */
+void sdl_xynth_MoveWMCursor (_THIS, int x, int y)
+{
+	debugf("sdl_xynth_MoveWMCursor\n");
+}
+
+/* Determine whether the mouse should be in relative mode or not.
+   This function is called when the input grab state or cursor
+   visibility state changes.
+   If the cursor is not visible, and the input is grabbed, the
+   driver can place the mouse in relative mode, which may result
+   in higher accuracy sampling of the pointer motion.
+*/
+void sdl_xynth_CheckMouseMode (_THIS)
+{
+	debugf("sdl_xynth_CheckMouseMode\n");
+}
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthevent.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthevent.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthevent.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthevent.c	2005-10-04 21:50:55.000000000 +0300
@@ -0,0 +1,188 @@
+#include "SDL_xynth.h"
+
+static SDLKey sdl_xynth_keymap[128];
+
+void sdl_xynth_atexit (s_window_t *window)
+{
+	if (sdl_xynth_running) {
+		while (sdl_xynth_running_) {
+			usleep(20000);
+		}
+		sdl_xynth_running = 0;
+		SDL_PrivateQuit();
+	}
+}
+
+void sdl_xynth_atevent (s_window_t *window, s_event_t *event)
+{
+        int state = 0;
+        int button = 0;
+        
+	if ((event->type & MOUSE_EVENT) &&
+	    ((event->mouse->x >= window->surface->buf->x) &&
+	     (event->mouse->x <= window->surface->buf->x + window->surface->buf->w) &&
+	     (event->mouse->y >= window->surface->buf->y) &&
+	     (event->mouse->y <= window->surface->buf->y + window->surface->buf->h))) {
+		if (event->type & MOUSE_OVER) {
+			if (event->type & MOUSE_HINT) {
+				state = SDL_PRESSED;
+			}
+			SDL_PrivateMouseMotion(state, 0, event->mouse->x - window->surface->buf->x, event->mouse->y - window->surface->buf->y);
+		} else if (event->type & (MOUSE_PRESSED | MOUSE_RELEASED | MOUSE_CLICKED)) {
+			if (event->type & (MOUSE_PRESSED)) {
+				state = SDL_PRESSED;
+			}
+			if (event->type & (MOUSE_RELEASED | MOUSE_CLICKED)) {
+				state = SDL_RELEASED;
+			}
+			switch (event->mouse->b) {
+				case MOUSE_RIGHTBUTTON:		button = SDL_BUTTON_RIGHT;	break;
+				case MOUSE_MIDDLEBUTTON:	button = SDL_BUTTON_MIDDLE;	break;
+				case MOUSE_LEFTBUTTON:		button = SDL_BUTTON_LEFT;	break;
+				default:			button = 0;			break;
+			}
+			SDL_PrivateMouseButton(state, button, event->mouse->x - window->surface->buf->x, event->mouse->y - window->surface->buf->y);
+		}
+	}
+	if (event->type & KEYBD_EVENT) {
+		SDL_keysym keysym;
+		if (event->type & KEYBD_PRESSED) {
+			state = SDL_PRESSED;
+		} else if (event->type & KEYBD_RELEASED) {
+			state = SDL_RELEASED;
+		}
+		SDL_PrivateKeyboard(state, sdl_xynth_translatekey(event, &keysym));
+	}
+}
+
+/* Handle any queued OS events */
+void sdl_xynth_PumpEvents(_THIS)
+{
+}
+
+/* Initialize keyboard mapping for this driver */
+void sdl_xynth_InitOSKeymap (_THIS)
+{
+	int i;
+	
+	for (i = 0; i < SDL_TABLESIZE(sdl_xynth_keymap); i++) {
+		sdl_xynth_keymap[i] = SDLK_UNKNOWN;
+	}
+	
+	sdl_xynth_keymap[S_KEYCODE_ESCAPE] = SDLK_ESCAPE;
+	sdl_xynth_keymap[S_KEYCODE_ONE] = SDLK_1;
+	sdl_xynth_keymap[S_KEYCODE_TWO] = SDLK_2;
+	sdl_xynth_keymap[S_KEYCODE_THREE] = SDLK_3;
+	sdl_xynth_keymap[S_KEYCODE_FOUR] = SDLK_4;
+	sdl_xynth_keymap[S_KEYCODE_FIVE] = SDLK_5;
+	sdl_xynth_keymap[S_KEYCODE_SIX] = SDLK_6;
+	sdl_xynth_keymap[S_KEYCODE_SEVEN] = SDLK_7;
+	sdl_xynth_keymap[S_KEYCODE_EIGHT] = SDLK_8;
+	sdl_xynth_keymap[S_KEYCODE_NINE] = SDLK_9;
+	sdl_xynth_keymap[S_KEYCODE_ZERO] = SDLK_0;
+	sdl_xynth_keymap[S_KEYCODE_MINUS] = SDLK_MINUS;
+	sdl_xynth_keymap[S_KEYCODE_EQUAL] = SDLK_EQUALS;
+	sdl_xynth_keymap[S_KEYCODE_DELETE] = SDLK_BACKSPACE;
+	sdl_xynth_keymap[S_KEYCODE_TAB] = SDLK_TAB;
+	sdl_xynth_keymap[S_KEYCODE_q] = SDLK_q;
+	sdl_xynth_keymap[S_KEYCODE_w] = SDLK_w;
+	sdl_xynth_keymap[S_KEYCODE_e] = SDLK_e;
+	sdl_xynth_keymap[S_KEYCODE_r] = SDLK_r;
+	sdl_xynth_keymap[S_KEYCODE_t] = SDLK_t;
+	sdl_xynth_keymap[S_KEYCODE_y] = SDLK_y;
+	sdl_xynth_keymap[S_KEYCODE_u] = SDLK_u;
+	sdl_xynth_keymap[S_KEYCODE_i] = SDLK_i;
+	sdl_xynth_keymap[S_KEYCODE_o] = SDLK_o;
+	sdl_xynth_keymap[S_KEYCODE_p] = SDLK_p;
+	sdl_xynth_keymap[S_KEYCODE_BRACKETLEFT] = SDLK_LEFTBRACKET;
+	sdl_xynth_keymap[S_KEYCODE_BRACKETRIGHT] = SDLK_RIGHTBRACKET;
+	sdl_xynth_keymap[S_KEYCODE_RETURN] = SDLK_RETURN;
+	sdl_xynth_keymap[S_KEYCODE_LEFTCONTROL] = SDLK_LCTRL;
+	sdl_xynth_keymap[S_KEYCODE_a] = SDLK_a;
+	sdl_xynth_keymap[S_KEYCODE_s] = SDLK_s;
+	sdl_xynth_keymap[S_KEYCODE_d] = SDLK_d;
+	sdl_xynth_keymap[S_KEYCODE_f] = SDLK_f;
+	sdl_xynth_keymap[S_KEYCODE_g] = SDLK_g;
+	sdl_xynth_keymap[S_KEYCODE_h] = SDLK_h;
+	sdl_xynth_keymap[S_KEYCODE_j] = SDLK_j;
+	sdl_xynth_keymap[S_KEYCODE_k] = SDLK_k;
+	sdl_xynth_keymap[S_KEYCODE_l] = SDLK_l;
+	sdl_xynth_keymap[S_KEYCODE_SEMICOLON] = SDLK_SEMICOLON;
+	sdl_xynth_keymap[S_KEYCODE_APOSTROPHE] = SDLK_QUOTE;
+	sdl_xynth_keymap[S_KEYCODE_GRAVE] = SDLK_BACKQUOTE;
+	sdl_xynth_keymap[S_KEYCODE_LEFTSHIFT] = SDLK_LSHIFT;
+	sdl_xynth_keymap[S_KEYCODE_BACKSLASH] = SDLK_BACKSLASH;
+	sdl_xynth_keymap[S_KEYCODE_z] = SDLK_z;
+	sdl_xynth_keymap[S_KEYCODE_x] = SDLK_x;
+	sdl_xynth_keymap[S_KEYCODE_c] = SDLK_c;
+	sdl_xynth_keymap[S_KEYCODE_v] = SDLK_v;
+	sdl_xynth_keymap[S_KEYCODE_b] = SDLK_b;
+	sdl_xynth_keymap[S_KEYCODE_n] = SDLK_n;
+	sdl_xynth_keymap[S_KEYCODE_m] = SDLK_m;
+	sdl_xynth_keymap[S_KEYCODE_COMMA] = SDLK_COMMA;
+	sdl_xynth_keymap[S_KEYCODE_PERIOD] = SDLK_PERIOD;
+	sdl_xynth_keymap[S_KEYCODE_SLASH] = SDLK_SLASH;
+	sdl_xynth_keymap[S_KEYCODE_RIGHTSHIFT] = SDLK_RSHIFT;
+	sdl_xynth_keymap[S_KEYCODE_KP_MULTIPLY] = SDLK_KP_MULTIPLY;
+	sdl_xynth_keymap[S_KEYCODE_ALT] = SDLK_LALT;
+	sdl_xynth_keymap[S_KEYCODE_SPACE] = SDLK_SPACE;
+	sdl_xynth_keymap[S_KEYCODE_CAPS_LOCK] = SDLK_CAPSLOCK;
+	sdl_xynth_keymap[S_KEYCODE_F1] = SDLK_F1;
+	sdl_xynth_keymap[S_KEYCODE_F2] = SDLK_F2;
+	sdl_xynth_keymap[S_KEYCODE_F3] = SDLK_F3;
+	sdl_xynth_keymap[S_KEYCODE_F4] = SDLK_F4;
+	sdl_xynth_keymap[S_KEYCODE_F5] = SDLK_F5;
+	sdl_xynth_keymap[S_KEYCODE_F6] = SDLK_F6;
+	sdl_xynth_keymap[S_KEYCODE_F7] = SDLK_F7;
+	sdl_xynth_keymap[S_KEYCODE_F8] = SDLK_F8;
+	sdl_xynth_keymap[S_KEYCODE_F9] = SDLK_F9;
+	sdl_xynth_keymap[S_KEYCODE_F10] = SDLK_F10;
+	sdl_xynth_keymap[S_KEYCODE_NUM_LOCK] = SDLK_NUMLOCK;
+	sdl_xynth_keymap[S_KEYCODE_SCROLL_LOCK] = SDLK_SCROLLOCK;
+	sdl_xynth_keymap[S_KEYCODE_KP_7] = SDLK_KP7;
+	sdl_xynth_keymap[S_KEYCODE_KP_8] = SDLK_KP8;
+	sdl_xynth_keymap[S_KEYCODE_KP_9] = SDLK_KP9;
+	sdl_xynth_keymap[S_KEYCODE_KP_SUBTRACT] = SDLK_KP_MINUS;
+	sdl_xynth_keymap[S_KEYCODE_KP_4] = SDLK_KP4;
+	sdl_xynth_keymap[S_KEYCODE_KP_5] = SDLK_KP5;
+	sdl_xynth_keymap[S_KEYCODE_KP_6] = SDLK_KP6;
+	sdl_xynth_keymap[S_KEYCODE_KP_ADD] = SDLK_KP_PLUS;
+	sdl_xynth_keymap[S_KEYCODE_KP_1] = SDLK_KP1;
+	sdl_xynth_keymap[S_KEYCODE_KP_2] = SDLK_KP2;
+	sdl_xynth_keymap[S_KEYCODE_KP_3] = SDLK_KP3;
+	sdl_xynth_keymap[S_KEYCODE_KP_0] = SDLK_KP0;
+	sdl_xynth_keymap[S_KEYCODE_KP_PERIOD] = SDLK_KP_PERIOD;
+	sdl_xynth_keymap[S_KEYCODE_LESS] = SDLK_LESS;
+	sdl_xynth_keymap[S_KEYCODE_F11] = SDLK_F11;
+	sdl_xynth_keymap[S_KEYCODE_F12] = SDLK_F12;
+	sdl_xynth_keymap[S_KEYCODE_KP_ENTER] = SDLK_KP_ENTER;
+	sdl_xynth_keymap[S_KEYCODE_RIGHTCONTROL] = SDLK_RCTRL;
+	sdl_xynth_keymap[S_KEYCODE_KP_DIVIDE] = SDLK_KP_DIVIDE;
+	sdl_xynth_keymap[S_KEYCODE_VOIDSYMBOL] = SDLK_PRINT;
+	sdl_xynth_keymap[S_KEYCODE_ALTGR] = SDLK_RALT;
+	sdl_xynth_keymap[S_KEYCODE_BREAK] = SDLK_BREAK;
+	sdl_xynth_keymap[S_KEYCODE_HOME] = SDLK_HOME;
+	sdl_xynth_keymap[S_KEYCODE_UP] = SDLK_UP;
+	sdl_xynth_keymap[S_KEYCODE_PAGEUP] = SDLK_PAGEUP;
+	sdl_xynth_keymap[S_KEYCODE_LEFT] = SDLK_LEFT;
+	sdl_xynth_keymap[S_KEYCODE_RIGHT] = SDLK_RIGHT;
+	sdl_xynth_keymap[S_KEYCODE_END] = SDLK_END;
+	sdl_xynth_keymap[S_KEYCODE_DOWN] = SDLK_DOWN;
+	sdl_xynth_keymap[S_KEYCODE_PAGEDOWN] = SDLK_PAGEDOWN;
+	sdl_xynth_keymap[S_KEYCODE_INSERT] = SDLK_INSERT;
+	sdl_xynth_keymap[S_KEYCODE_REMOVE] = SDLK_DELETE;
+	sdl_xynth_keymap[S_KEYCODE_PAUSE] = SDLK_PAUSE;
+}
+
+SDL_keysym * sdl_xynth_translatekey(s_event_t *event, SDL_keysym *keysym)
+{
+	keysym->scancode = event->keybd->scancode;
+	keysym->sym = (event->keybd->keycode == S_KEYCODE_NOCODE) ? SDLK_UNKNOWN : sdl_xynth_keymap[event->keybd->keycode];
+	keysym->mod = KMOD_NONE;
+	keysym->unicode = event->keybd->ascii;
+	
+	if (SDL_TranslateUNICODE) {
+	}
+	
+	return keysym;
+}
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthgamma.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthgamma.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthgamma.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthgamma.c	2005-07-24 03:14:21.000000000 +0300
@@ -0,0 +1,25 @@
+#include "SDL_xynth.h"
+
+/* Set the gamma correction directly (emulated with gamma ramps) */
+int sdl_xynth_SetGamma (_THIS, float red, float green, float blue)
+{
+	return 0;
+}
+
+/* Get the gamma correction directly (emulated with gamma ramps) */
+int sdl_xynth_GetGamma (_THIS, float *red, float *green, float *blue)
+{
+	return 0;
+}
+
+/* Set the gamma ramp */
+int sdl_xynth_SetGammaRamp (_THIS, Uint16 *ramp)
+{
+	return 0;
+}
+
+/* Get the gamma ramp */
+int sdl_xynth_GetGammaRamp (_THIS, Uint16 *ramp)
+{
+	return 0;
+}
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthgl.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthgl.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthgl.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthgl.c	2005-07-24 03:14:28.000000000 +0300
@@ -0,0 +1,30 @@
+#include "SDL_xynth.h"
+
+/* Sets the dll to use for OpenGL and loads it */
+int sdl_xynth_GL_LoadLibrary (_THIS, const char *path)
+{
+	return 0;
+}
+
+/* Retrieves the address of a function in the gl library */
+void * sdl_xynth_GL_GetProcAddress (_THIS, const char *proc)
+{
+	return NULL;
+}
+
+/* Get attribute information from the windowing system. */
+int sdl_xynth_GL_GetAttribute (_THIS, SDL_GLattr attrib, int *value)
+{
+	return 0;
+}
+
+/* Make the context associated with this driver current */
+int sdl_xynth_GL_MakeCurrent (_THIS)
+{
+	return 0;
+}
+
+/* Swap the current buffers in double buffer mode. */
+void sdl_xynth_GL_SwapBuffers (_THIS)
+{
+}
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthhw.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthhw.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthhw.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthhw.c	2005-07-24 03:14:34.000000000 +0300
@@ -0,0 +1,54 @@
+#include "SDL_xynth.h"
+
+/* Allocates a surface in video memory */
+int sdl_xynth_AllocHWSurface (_THIS, SDL_Surface *surface)
+{
+	return -1;
+}
+
+/* Sets the hardware accelerated blit function, if any, based
+   on the current flags of the surface (colorkey, alpha, etc.)
+ */
+int sdl_xynth_CheckHWBlit (_THIS, SDL_Surface *src, SDL_Surface *dst)
+{
+	return 0;
+}
+
+/* Fills a surface rectangle with the given color */
+int sdl_xynth_FillHWRect (_THIS, SDL_Surface *dst, SDL_Rect *rect, Uint32 color)
+{
+	return 0;
+}
+
+/* Sets video mem colorkey and accelerated blit function */
+int sdl_xynth_SetHWColorKey (_THIS, SDL_Surface *surface, Uint32 key)
+{
+	return 0;
+}
+
+/* Sets per surface hardware alpha value */
+int sdl_xynth_SetHWAlpha (_THIS, SDL_Surface *surface, Uint8 value)
+{
+	return 0;
+}
+
+/* Returns a readable/writable surface */
+int sdl_xynth_LockHWSurface (_THIS, SDL_Surface *surface)
+{
+	return 0;
+}
+
+void sdl_xynth_UnlockHWSurface (_THIS, SDL_Surface *surface)
+{
+}
+
+/* Performs hardware flipping */
+int sdl_xynth_FlipHWSurface (_THIS, SDL_Surface *surface)
+{
+	return 0;
+}
+
+/* Frees a previously allocated video surface */
+void sdl_xynth_FreeHWSurface (_THIS, SDL_Surface *surface)
+{
+}
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthvideo.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthvideo.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthvideo.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthvideo.c	2005-10-04 22:21:00.000000000 +0300
@@ -0,0 +1,274 @@
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+
+#include "SDL.h"
+#include "SDL_error.h"
+#include "SDL_video.h"
+#include "SDL_mouse.h"
+#include "SDL_sysvideo.h"
+#include "SDL_pixels_c.h"
+#include "SDL_events_c.h"
+
+#include "SDL_xynth.h"
+
+#define xynthVID_DRIVER_NAME "xynth"
+
+VideoBootStrap XYNTH_bootstrap = {
+	xynthVID_DRIVER_NAME, "SDL xynth video driver",
+	sdl_xynth_Available, sdl_xynth_CreateDevice
+};
+
+int sdl_xynth_Available(void)
+{
+	const char *envr = getenv("SDL_VIDEODRIVER");
+	if ((envr) && (strcmp(envr, xynthVID_DRIVER_NAME) == 0)) {
+		return(1);
+	}
+
+	return(0);
+}
+
+void sdl_xynth_DeleteDevice(SDL_VideoDevice *device)
+{
+	s_free(device->hidden);
+	s_free(device);
+}
+
+SDL_VideoDevice *sdl_xynth_CreateDevice(int devindex)
+{
+	SDL_VideoDevice *device;
+
+	/* Initialize all variables that we clean on shutdown */
+	device = (SDL_VideoDevice *) s_malloc(sizeof(SDL_VideoDevice));
+	if (device) {
+		memset(device, 0, (sizeof *device));
+		device->hidden = (struct SDL_PrivateVideoData *) s_malloc((sizeof *device->hidden));
+	}
+	if ((device == NULL) || (device->hidden == NULL)) {
+		SDL_OutOfMemory();
+		if (device) {
+			s_free(device);
+		}
+		return(0);
+	}
+	memset(device->hidden, 0, (sizeof *device->hidden));
+
+	device->VideoInit = sdl_xynth_VideoInit;
+	device->ListModes = sdl_xynth_ListModes;
+	device->SetVideoMode = sdl_xynth_SetVideoMode;
+	device->ToggleFullScreen = sdl_xynth_ToggleFullScreen;
+	device->UpdateMouse = sdl_xynth_UpdateMouse;
+	device->CreateYUVOverlay = sdl_xynth_CreateYUVOverlay;
+	device->SetColors = sdl_xynth_SetColors;
+	device->UpdateRects = sdl_xynth_UpdateRects;
+	device->VideoQuit = sdl_xynth_VideoQuit;
+
+	device->AllocHWSurface = sdl_xynth_AllocHWSurface;
+	device->CheckHWBlit = NULL;
+	device->FillHWRect = NULL;
+	device->SetHWColorKey = NULL;
+	device->SetHWAlpha = NULL;
+	device->LockHWSurface = sdl_xynth_LockHWSurface;
+	device->UnlockHWSurface = sdl_xynth_UnlockHWSurface;
+	device->FlipHWSurface = NULL;
+	device->FreeHWSurface = sdl_xynth_FreeHWSurface;
+
+	device->SetGamma = NULL;
+	device->GetGamma = NULL;
+	device->SetGammaRamp = NULL;
+	device->GetGammaRamp = NULL;
+
+	device->GL_LoadLibrary = NULL;
+	device->GL_GetProcAddress = NULL;
+	device->GL_GetAttribute = NULL;
+	device->GL_MakeCurrent = NULL;
+	device->GL_SwapBuffers = NULL;
+	
+	device->SetCaption = sdl_xynth_SetCaption;
+	device->SetIcon = NULL;
+	device->IconifyWindow = NULL;
+	device->GrabInput = NULL;
+	device->GetWMInfo = NULL;
+
+	device->FreeWMCursor = sdl_xynth_FreeWMCursor;
+	device->CreateWMCursor = sdl_xynth_CreateWMCursor;
+	device->ShowWMCursor = sdl_xynth_ShowWMCursor;
+	device->WarpWMCursor = sdl_xynth_WarpWMCursor;
+	device->MoveWMCursor = sdl_xynth_MoveWMCursor;
+	device->CheckMouseMode = sdl_xynth_CheckMouseMode;	
+	
+	device->InitOSKeymap = sdl_xynth_InitOSKeymap;
+	device->PumpEvents = sdl_xynth_PumpEvents;
+
+	device->free = sdl_xynth_DeleteDevice;
+
+	return device;
+}
+
+/* Initialize the native video subsystem, filling 'vformat' with the
+   "best" display pixel format, returning 0 or -1 if there's an error.
+ */
+int sdl_xynth_VideoInit(_THIS, SDL_PixelFormat *vformat)
+{
+	if (s_client_init(&this->hidden->window)) {
+		fprintf(stderr, "Could not connect to Xynth!\n");
+		exit(1);
+	}
+
+	vformat->BitsPerPixel = this->hidden->window->surface->bitsperpixel;
+	vformat->BytesPerPixel = this->hidden->window->surface->bytesperpixel;;
+
+	this->info.wm_available = 1;
+
+	return 0;
+}
+
+/* List the available video modes for the given pixel format, sorted
+   from largest to smallest.
+ */
+SDL_Rect **sdl_xynth_ListModes(_THIS, SDL_PixelFormat *format, Uint32 flags)
+{
+   	 return (SDL_Rect **) -1;
+}
+
+/* Set the requested video mode, returning a surface which will be
+   set to the SDL_VideoSurface.  The width and height will already
+   be verified by ListModes(), and the video subsystem is free to
+   set the mode to a supported bit depth different from the one
+   specified -- the desired bpp will be emulated with a shadow
+   surface if necessary.  If a new mode is returned, this function
+   should take care of cleaning up the current mode.
+ */
+SDL_Surface * sdl_xynth_SetVideoMode(_THIS, SDL_Surface *current, int width, int height, int bpp, Uint32 flags)
+{
+	if (this->hidden->buffer) {
+		s_free(this->hidden->buffer);
+	}
+
+        bpp = this->hidden->window->surface->bitsperpixel;
+        if (bpp == 15) {
+		bpp = 16;
+	}
+        
+	this->hidden->buffer = s_malloc(width * height * (bpp / 8));
+        this->hidden->bpp = bpp;
+	memset(this->hidden->buffer, 0, width * height * (bpp / 8));
+
+	if (!SDL_ReallocFormat(current, bpp, 0, 0, 0, 0)) {
+		s_free(this->hidden->buffer);
+		this->hidden->buffer = NULL;
+		SDL_SetError("Couldn't allocate new pixel format for requested mode");
+		return NULL;
+	}
+
+	current->flags = flags & SDL_FULLSCREEN;
+	this->hidden->w = current->w = width;
+	this->hidden->h = current->h = height;
+	current->pitch = current->w * (bpp / 8);
+	current->pixels = this->hidden->buffer;
+
+	s_window_new(this->hidden->window, WINDOW_MAIN, NULL);
+	s_window_set_coor(this->hidden->window, 0, 0, 0, width, height);
+	s_window_set_coor(this->hidden->window, WINDOW_NOFORM, this->hidden->window->surface->buf->x, this->hidden->window->surface->buf->y, width, height);
+	s_window_set_title(this->hidden->window, "Xynth - SDL");
+	s_window_show(this->hidden->window);
+
+	s_client_atexit(this->hidden->window, sdl_xynth_atexit);
+	s_client_atevent(this->hidden->window, sdl_xynth_atevent);
+
+	this->hidden->tid = s_thread_create((void * (*) (void *)) &s_client_main, this->hidden->window);
+	sdl_xynth_running = 1;
+
+	return current ;
+}
+
+/* Toggle the fullscreen mode */
+int sdl_xynth_ToggleFullScreen (_THIS, int on)
+{
+	return -1;
+}
+
+/* This is called after the video mode has been set, to get the
+   initial mouse state.  It should queue events as necessary to
+   properly represent the current mouse focus and position.
+ */
+void sdl_xynth_UpdateMouse (_THIS)
+{
+}
+
+/* Create a YUV video surface (possibly overlay) of the given
+   format.  The hardware should be able to perform at least 2x
+   scaling on display.
+ */
+SDL_Overlay * sdl_xynth_CreateYUVOverlay (_THIS, int width, int height, Uint32 format, SDL_Surface *display)
+{
+	return NULL;
+}
+
+/* Sets the color entries { firstcolor .. (firstcolor+ncolors-1) }
+   of the physical palette to those in 'colors'. If the device is
+   using a software palette (SDL_HWPALETTE not set), then the
+   changes are reflected in the logical palette of the screen
+   as well.
+   The return value is 1 if all entries could be set properly
+   or 0 otherwise.
+ */
+int sdl_xynth_SetColors(_THIS, int firstcolor, int ncolors, SDL_Color *colors)
+{
+	return 1;
+}
+
+/* This pointer should exist in the native video subsystem and should
+   point to an appropriate update function for the current video mode
+ */
+void sdl_xynth_UpdateRects(_THIS, int numrects, SDL_Rect *rects)
+{
+        char *buf;
+        int n = numrects;
+        SDL_Rect *r = rects;
+
+        if (!sdl_xynth_running) {
+		return;
+	}
+	
+	sdl_xynth_running_ = 1;
+	
+        if (this->hidden->bpp != this->hidden->window->surface->bitsperpixel) {
+		s_copybuffer(this->hidden->buffer, this->hidden->bpp, &buf, this->hidden->window->surface->bitsperpixel, this->hidden->w, this->hidden->h);
+	        while (n--) {
+			s_putboxpart(this->hidden->window->surface, r->x, r->y, r->w, r->h, this->hidden->w, this->hidden->h, buf, r->x, r->y);
+			r++;
+		}
+		s_free(buf);
+	} else {
+		while (n--) {
+			s_putboxpart(this->hidden->window->surface, r->x, r->y, r->w, r->h, this->hidden->w, this->hidden->h, this->hidden->buffer, r->x, r->y);
+			r++;
+		}
+	}
+	
+	sdl_xynth_running_ = 0;
+}
+
+/* Reverse the effects VideoInit() -- called if VideoInit() fails
+   or if the application is shutting down the video subsystem.
+ */
+void sdl_xynth_VideoQuit(_THIS)
+{
+	while (sdl_xynth_running_) {
+		usleep(20000);
+	}
+	
+	if (this->screen->pixels != NULL)
+	{
+		s_free(this->screen->pixels);
+		this->screen->pixels = NULL;
+	}
+	
+	if (sdl_xynth_running) {
+		s_client_quit(this->hidden->window);
+		s_thread_join(this->hidden->tid, NULL);
+	}
+	sdl_xynth_running = 0;
+}
diff -U 3 -H -d -r -N SDL-1.2.9/src/video/xynth/SDL_xynthwm.c SDL-1.2.9-xynth/src/video/xynth/SDL_xynthwm.c
--- SDL-1.2.9/src/video/xynth/SDL_xynthwm.c	1970-01-01 02:00:00.000000000 +0200
+++ SDL-1.2.9-xynth/src/video/xynth/SDL_xynthwm.c	2005-07-24 03:15:01.000000000 +0300
@@ -0,0 +1,33 @@
+#include "SDL_xynth.h"
+
+/* Set the title and icon text */
+void sdl_xynth_SetCaption (_THIS, const char *title, const char *icon)
+{
+	s_window_set_title(this->hidden->window, title);
+}
+
+/* Set the window icon image */
+void sdl_xynth_SetIcon (_THIS, SDL_Surface *icon, Uint8 *mask)
+{
+}
+
+/* Iconify the window.
+   This function returns 1 if there is a window manager and the
+   window was actually iconified, it returns 0 otherwise.
+*/
+int sdl_xynth_IconifyWindow (_THIS)
+{
+	return 0;
+}
+
+/* Grab or ungrab keyboard and mouse input */
+SDL_GrabMode sdl_xynth_GrabInput (_THIS, SDL_GrabMode mode)
+{
+	return SDL_GRAB_OFF;
+}
+
+/* Get some platform dependent window information */
+int sdl_xynth_GetWMInfo (_THIS, SDL_SysWMinfo *info)
+{
+	return 0;
+}
